# 🎯 راهنمای کامل ربات معاملاتی ارزهای دیجیتال

## 🚀 نحوه اجرای سیستم

### روش اول: اجرای مستقیم ربات
```bash
# نصب کتابخانه‌های مورد نیاز
pip install -r requirements.txt

# اجرای مستقیم ربات
python crypto_bot_enhanced.py
```

### روش دوم: اجرای سرویس وب (توصیه شده)
```bash
# نصب کتابخانه‌های مورد نیاز  
pip install -r requirements.txt

# اجرای سرویس وب
uvicorn main:app --host=0.0.0.0 --port=8080
```

سپس به آدرس `http://localhost:8080` بروید تا وضعیت ربات را ببینید.

### روش سوم: اجرای در Heroku یا سرویس‌های کلودی
فایل `Procfile` آماده شده و می‌توانید مستقیماً deploy کنید.

## 📊 استراتژی کلی سیستم معاملاتی

### 🎯 فلسفه معاملاتی
این سیستم بر اساس **Smart Money Concepts (SMC)** و تحلیل حجم کار می‌کند و شامل موارد زیر است:

### 📈 اجزای اصلی استراتژی:

#### 1. تحلیل چندتایم‌فریم
- **15 دقیقه**: برای تایید ورود و خروج دقیق
- **1 ساعت**: برای تحلیل اصلی و تولید سیگنال
- **4 ساعت**: برای تأیید ترند کلی
- **روزانه**: برای درک وضعیت بازار

#### 2. تحلیل ساختار بازار (Market Structure)
- **Higher Highs & Higher Lows**: برای شناسایی روند صعودی
- **Lower Highs & Lower Lows**: برای شناسایی روند نزولی
- **تأیید حجمی**: حجم باید روند را تأیید کند

#### 3. Order Blocks (بلوک‌های سفارش)
- **Bullish Order Block**: نواحی که قیمت به شدت بعد از آن صعود کرده
- **Bearish Order Block**: نواحی که قیمت به شدت بعد از آن نزول کرده
- **تأیید حجمی**: بلوک‌ها باید با spike حجم همراه باشند

#### 4. تحلیل حجم پیشرفته
- **On Balance Volume (OBV)**: جهت جریان پول
- **Volume Price Trend (VPT)**: تأیید حرکت قیمت
- **Money Flow Index (MFI)**: فشار خرید/فروش
- **Volume Spike Detection**: شناسایی ورود Smart Money

#### 5. اندیکاتورهای تکنیکال
- **RSI**: برای شناسایی oversold/overbought
- **MACD**: برای تأیید تغییر روند
- **Bollinger Bands**: برای شناسایی محدوده قیمت
- **ATR**: برای محاسبه Stop Loss و Take Profit

#### 6. تحلیل Divergence
- **RSI Divergence**: اختلاف بین قیمت و RSI
- **MACD Divergence**: اختلاف بین قیمت و MACD
- تشخیص تضعیف یا تقویت روند

#### 7. تحلیل احساسات بازار
- **Fear & Greed Index**: سنجش احساسات کلی بازار
- **On-chain Analysis**: تحلیل داده‌های بلاک‌چین (ساده‌شده)

### 🎯 شرایط تولید سیگنال

#### سیگنال خرید (LONG):
1. ✅ ساختار بازار 1 ساعته صعودی
2. ✅ اعتماد ساختار بالای 60%
3. ✅ ساختار 4 ساعته صعودی یا خنثی
4. ✅ حداقل یک Bullish Order Block
5. ✅ تأیید حجمی (OBV صعودی + spike حجم)
6. ✅ RSI بین 30-70
7. ✅ MFI بالای 50
8. ✅ احساسات مثبت (Fear & Greed > 55)
9. ✅ Bullish Divergence (اختیاری)

#### سیگنال فروش (SHORT):
1. ✅ ساختار بازار 1 ساعته نزولی
2. ✅ اعتماد ساختار بالای 60%
3. ✅ ساختار 4 ساعته نزولی یا خنثی
4. ✅ حداقل یک Bearish Order Block
5. ✅ تأیید حجمی (OBV نزولی + spike حجم)
6. ✅ RSI بین 30-70
7. ✅ MFI زیر 50
8. ✅ احساسات منفی (Fear & Greed < 45)
9. ✅ Bearish Divergence (اختیاری)

**حداقل 6 شرط از 9 شرط باید برقرار باشد تا سیگنال تولید شود.**

### 💰 مدیریت ریسک

#### محاسبه Stop Loss:
- **روش 1**: زیر کمترین قیمت 10 کندل اخیر
- **روش 2**: بر اساس ATR (1.8 برابر ATR)
- **انتخاب**: کمتر از دو روش بالا

#### محاسبه Take Profit:
- **TP1**: نسبت ریسک/ریوارد 1:1.8
- **TP2**: نسبت ریسک/ریوارد 1:3
- **TP3**: نسبت ریسک/ریوارد 1:5

#### توزیع سود:
- **TP1**: 40% موقعیت
- **TP2**: 35% موقعیت  
- **TP3**: 25% موقعیت

#### قوانین کلی:
- حداکثر ریسک: 2% سرمایه در هر معامله
- حداکثر مدت معامله: 24 ساعت
- حداقل نسبت ریسک/ریوارد: 1:2

### 🔄 ردیابی سیگنال‌های فعال

سیستم به صورت خودکار وضعیت همه سیگنال‌های فعال را بررسی می‌کند:

- **WAITING_ENTRY**: منتظر رسیدن قیمت به نقطه ورود
- **IN_PROFIT**: معامله سودده اما هنوز به TP نرسیده
- **TP1_HIT**: اولین هدف سودی
- **TP2_HIT**: دومین هدف سودی
- **TP3_HIT**: سومین هدف سودی
- **STOPPED_OUT**: معامله با ضرر بسته شده

### 📊 ارزهای مورد تحلیل

```
BTC/USDT, ETH/USDT, SOL/USDT, ADA/USDT
MATIC/USDT, AVAX/USDT, DOT/USDT, LINK/USDT
DOGE/USDT, XRP/USDT, BNB/USDT, ATOM/USDT
```

### ⚙️ تنظیمات سیستم

- **اسکن هر 5 دقیقه**: بررسی مداوم بازار
- **تحلیل هر 30 دقیقه**: اسکن کامل همه ارزها
- **به‌روزرسانی مداوم**: ردیابی سیگنال‌های فعال

### 🎯 مزایای سیستم

1. **تحلیل جامع**: ترکیب تکنیکال، حجمی و احساسات
2. **مدیریت ریسک**: محاسبه دقیق Stop Loss و Take Profit
3. **ردیابی مداوم**: نظارت بر سیگنال‌های فعال
4. **خودکارسازی**: کاهش عامل انسانی و احساسات
5. **گزارش‌دهی**: خروجی کامل و قابل فهم

### ⚠️ نکات مهم

1. **تست کنید**: ابتدا در حالت Demo تست کنید
2. **API Keys**: برای معاملات واقعی API Key بایننس نیاز دارید
3. **اینترنت پایدار**: سیستم نیاز به اتصال مداوم دارد
4. **سرمایه مناسب**: حداقل 1000 دلار برای شروع توصیه می‌شود
5. **صبر و انضباط**: از سیگنال‌های سیستم پیروی کنید

### 🔧 عیب‌یابی

اگر خطا گرفتید:
```bash
# بررسی نصب کتابخانه‌ها
pip install ccxt pandas numpy requests ta aiohttp

# اجرای مجدد
python crypto_bot_enhanced.py
```

---

**توجه**: این سیستم ابزاری برای کمک به تصمیم‌گیری است و تضمینی برای سود نمی‌دهد. همیشه مدیریت ریسک را رعایت کنید.